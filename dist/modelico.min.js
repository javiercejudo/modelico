!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("immutable")):"function"==typeof define&&define.amd?define(["immutable"],t):function(){var n=e.Modelico,r=t(e.Immutable);e.Modelico=r,r.noConflict=function(){return e.Modelico=n,r}}()}(this,function(e){"use strict";e="default"in e?e.default:e;var t="19.0.5",n="Javier Cejudo <javier@javiercejudo.com> (http://www.javiercejudo.com)",r="MIT",u="https://github.com/javiercejudo/modelico/tree/immutable-js#readme",i=Symbol("type"),o=Symbol("fields"),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},l=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},y=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},v=function(e){return Array.isArray(e)?e:Array.from(e)},p=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},h=function(e){return function(t){return t[e]}},m=function(e,t){return function(){return t(e.apply(void 0,arguments))}},b=function(e){return!e},d=function(e){return e},O=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.bind.apply(e,[void 0].concat(n))},k=function(e){return function(t,n){return e(n)}},g=function(e){return function(){return e}},j=function(e){return null==e||Number.isNaN(e)},w=m(j,b),N=function(e){return function(t){return j(t)?e:t}},S=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})},M=m(h("reviver"),N(k(d))),P=function(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&!!e},_=Object.freeze({}),z=function(e,t){return e===t||Object.is(e,t)},T=function(e,t){return null==e||null==t?e===t:e.constructor===t.constructor},E=m(T,b),A=function(e,t){return w(e)&&e.equals?e.equals(t):z(e,t)},J=function(e,t){if(!t.innerTypes)throw Error("missing static innerTypes for "+(t.displayName||t.name));return t.innerTypes(e+1,t)},q=function(e){throw Error(e)},x=new WeakMap,D=function(e,t){return x.has(t)||x.set(t,J(e,t)),x.get(t)},C=function(e,t,n,r){return Object.keys(r).reduce(function(u,i){var o=D(e,t),a=o[i];return a?u[i]=M(a)(n,r[i]):u[i]=r[i],u},{})},Y=function(e,t){return function(n,r){if(""!==n)return r;var u=P(r)?C(e,t,n,r):r;return new t(u)}},U=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,r=arguments[2];if(f(this,e),!P(n))throw TypeError("expected an object with fields for "+(t.displayName||t.name)+" but got "+n);Object.freeze(n);var u=J(0,t);r=N(this)(r),r[i]=g(t),r[o]=g(n),Object.keys(u).forEach(function(e){var t=n[e],i=Re.Maybe.EMPTY;if(w(t))i=t;else if(u[e].type!==Re.Maybe)throw TypeError('no value for key "'+e+'"');r[e]=g(i)})}return c(e,[{key:"set",value:function(e,t){var n=Object.assign({},this[o](),s({},e,t));return new(this[i]())(n)}},{key:"setPath",value:function(e,t){if(0===e.length)return new(this[i]())(t);var n=v(e),r=n[0],u=n.slice(1),o=this[r]();return o.setPath?this.set(r,o.setPath(u,t)):this.set(r,t)}},{key:"equals",value:function(e){return this===e||!E(this,e)&&JSON.stringify(this)===JSON.stringify(e)}},{key:"toJSON",value:function(){return this[o]()}},{key:"toJS",value:function(){return JSON.parse(JSON.stringify(this))}},{key:"stringify",value:function(e){return JSON.stringify(this,null,e)}}],[{key:"factory",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}}]),e}(),L=Object.freeze(U),I=function(e){return function(t,n){if(""!==t)return n;var r=null===n?null:e.reviver(t,n);return new H(r)}},F=function(){function e(){f(this,e)}return c(e,[{key:"toJSON",value:function(){return null}}]),e}(),W=function(){function e(t){f(this,e),this.get=g(t),Object.freeze(this)}return c(e,[{key:"toJSON",value:function(){var e=this.get();return j(e)?null:e.toJSON?e.toJSON():e}}]),e}(),B=new F,H=function(e){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f(this,t);var r=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t)),u=n&&j(e)?B:new W(e);return r.inner=g(u),Object.freeze(r),r}return l(t,e),c(t,[{key:"set",value:function(e,n){if(this.isEmpty())return this;var r=this.inner().get();if(j(r))return this;var u=r.set?r.set(e,n):null;return new t(u)}},{key:"setPath",value:function(e,n){if(0===e.length)return t.of(n);if(this.isEmpty())return this;var r=this.inner().get();if(j(r))return this;var u=r.setPath?r.setPath(e,n):null;return t.of(u)}},{key:"isEmpty",value:function(){return this.inner()===B}},{key:"getOrElse",value:function(e){return this.isEmpty()?e:this.inner().get()}},{key:"map",value:function(e){return this.isEmpty()?this:t.ofAny(e(this.inner().get()))}},{key:"toJSON",value:function(){return this.inner().toJSON()}},{key:"equals",value:function(e){if(this===e)return!0;if(E(this,e))return!1;var t=this.inner(),n=e.inner();return this.isEmpty()||e.isEmpty()?t===n:A(t.get(),n.get())}}],[{key:"of",value:function(e){return new t(e)}},{key:"ofAny",value:function(e){return new t(e,!1)}},{key:"metadata",value:function(e){return Object.freeze({type:t,reviver:I(e)})}},{key:"innerTypes",value:function(){return _}}]),t}(L);H.displayName="Maybe",H.EMPTY=H.of();var R=Object.freeze(H),G=function(e,t){return Object.assign(e,s({},t,{code:t}))},K=function(e){return function(t,n){var r=e[n];if(j(r))throw TypeError("missing enumerator ("+n+")");return r}},Q=function(e){function t(e){f(this,t);var n=Array.isArray(e)?e.reduce(G,{}):e,r=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));return Object.getOwnPropertyNames(n).forEach(function(e){r[e]=g(n[e]),n[e].toJSON=g(e)}),Object.defineProperty(r,"metadata",{value:g(Object.freeze({type:t,reviver:K(n)})),enumerable:!1}),Object.freeze(r),r}return l(t,e),c(t,null,[{key:"fromObject",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return new t(e)}},{key:"innerTypes",value:function(){return _}}]),t}(L);Q.displayName="Enum";var V=Object.freeze(Q),X=function(e,t,n,r){var u=e.inner(),i=u.set(n,r);return u===i?e:t.fromArray([].concat(p(i)))},Z=function(e,t){var n=t.length;if(n%2===1)throw TypeError((e.displayName||e.name)+".of requires an even number of arguments");for(var r=[],u=0;u<n;u+=2)r.push([t[u],t[u+1]]);return e.fromArray(r)},$=function(e,t){return Object.freeze({type:e,reviver:t})},ee=function(t){function n(t,r){f(this,n);var u=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));if(j(r))throw TypeError("missing map");var i=e.OrderedMap(r);return u.inner=g(i),u.size=i.size,u[Symbol.iterator]=function(){return i[Symbol.iterator]()},u}return l(n,t),c(n,[{key:"setPath",value:function(e,t){if(0===e.length)return new(this[i]())(t);var n=v(e),r=n[0],u=n.slice(1),o=this.inner().get(r);return o.setPath?this.set(r,o.setPath(u,t)):this.set(r,t)}},{key:"equals",value:function(e){return this===e||!E(this,e)&&this.inner().equals(e.inner())}}]),n}(L),te=Object.freeze(ee),ne=function(e,t){return function(n){var r=e("",n[0]),u=t("",n[1]);return[r,u]}},re=function(e,t){return function(n,r){if(""!==n)return r;var u=M(e),i=M(t),o=null===r?null:new Map(r.map(ne(u,i)));return ue.fromMap(o)}},ue=function(e){function t(e){f(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t,e));return Object.freeze(n),n}return l(t,e),c(t,[{key:"set",value:function(e,n){return X(this,t,e,n)}},{key:"toJSON",value:function(){return[].concat(p(this))}}],[{key:"fromMap",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return t.fromMap(new Map(e))}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return Z(t,n)}},{key:"fromObject",value:function(e){return t.fromArray(S(e))}},{key:"metadata",value:function(e,n){return $(t,re(e,n))}},{key:"innerTypes",value:function(){return _}}]),t}(te);ue.displayName="ModelicoMap",ue.EMPTY=ue.of();var ie=Object.freeze(ue),oe=function(e,t){return e[t[0]]=t[1],e},ae=function(e,t){return function(n,r){return[].concat(p(n),[[r,e("",t[r])]])}},fe=function(e){return function(t,n){if(""!==t)return n;var r=M(e),u=null===n?null:new Map(Object.keys(n).reduce(ae(r,n),[]));return ce.fromMap(u)}},ce=function(e){function t(e){f(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t,e));return Object.freeze(n),n}return l(t,e),c(t,[{key:"set",value:function(e,n){return X(this,t,e,n)}},{key:"toJSON",value:function(){return[].concat(p(this)).reduce(oe,{})}}],[{key:"fromMap",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return t.fromMap(new Map(e))}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return Z(t,n)}},{key:"fromObject",value:function(e){return t.fromArray(S(e))}},{key:"metadata",value:function(e){return $(t,fe(e))}},{key:"innerTypes",value:function(){return _}}]),t}(te);ce.displayName="StringMap",ce.EMPTY=ce.of();var se=Object.freeze(ce),le=function(e,t){return e[t[0].toJSON()]=t[1],e},ye=function(e,t,n){return function(r){var u=e("",r),i=t("",n[r]);return[u,i]}},ve=function(e,t){return function(n,r){if(""!==n)return r;var u=M(e),i=M(t),o=null===r?null:new Map(Object.keys(r).map(ye(u,i,r)));return new pe(o)}},pe=function(e){function t(e){f(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t,e));return Object.freeze(n),n}return l(t,e),c(t,[{key:"set",value:function(e,n){return X(this,t,e,n)}},{key:"toJSON",value:function(){return[].concat(p(this)).reduce(le,{})}}],[{key:"fromMap",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return t.fromMap(new Map(e))}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return Z(t,n)}},{key:"metadata",value:function(e,n){return $(t,ve(e,n))}},{key:"innerTypes",value:function(){return _}}]),t}(te);pe.displayName="EnumMap",pe.EMPTY=pe.of();var he=Object.freeze(pe),me=function(e,t){return be.of(t)},be=function(e){function t(e){f(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));if(!Number.isNaN(e)&&j(e))throw TypeError("missing number");return n.inner=g(Number(e)),Object.freeze(n),n}return l(t,e),c(t,[{key:"set",value:function(){q("Number.set is not supported")}},{key:"setPath",value:function(e,n){return 0===e.length?t.of(n):void q("ModelicoNumber.setPath is not supported for non-empty paths")}},{key:"toJSON",value:function(){var e=this.inner();return Object.is(e,-0)?"-0":e===1/0?"Infinity":e===-(1/0)?"-Infinity":Number.isNaN(e)?"NaN":e}},{key:"equals",value:function(e){return this===e||!E(this,e)&&z(this.inner(),e.inner())}}],[{key:"of",value:function(e){return new t(e)}},{key:"metadata",value:function(){return Object.freeze({type:t,reviver:me})}},{key:"innerTypes",value:function(){return _}}]),t}(L);be.displayName="ModelicoNumber";var de=Object.freeze(be),Oe=function(e,t){var n=null===t?null:new Date(t);return new ke(n)},ke=function(e){function t(e){f(this,t);var n=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));if(j(e))throw TypeError("missing date");var r=new Date(e.getTime());return n.inner=function(){return new Date(r.getTime())},Object.freeze(n),n}return l(t,e),c(t,[{key:"set",value:function(){q("Date.set is not supported")}},{key:"setPath",value:function(e,n){return 0===e.length?t.of(n):void q("Date.setPath is not supported for non-empty paths")}},{key:"toJSON",value:function(){return this.inner().toISOString()}},{key:"equals",value:function(e){return this===e||!E(this,e)&&this.toJSON()===e.toJSON()}}],[{key:"of",value:function(e){return new t(e)}},{key:"metadata",value:function(){return Object.freeze({type:t,reviver:Oe})}},{key:"innerTypes",value:function(){return _}}]),t}(L);ke.displayName="ModelicoDate";var ge=Object.freeze(ke),je=function(e,t){return function(n,r){if(""!==n)return r;var u=O(M(t),n),i=null===r?null:r.map(u);return new e(i)}},we=function(e,t){return Object.freeze({type:e,reviver:je(e,t)})},Ne=function(e,t){return e===t||!E(e,t)&&e.inner().equals(t.inner())},Se=function(t){function n(t){f(this,n);var r=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n));if(j(t))throw TypeError("missing list");Object.freeze(t);var u=e.List(t);return r.inner=g(u),r.size=u.size,r[Symbol.iterator]=function(){return u[Symbol.iterator]()},Object.freeze(r),r}return l(n,t),c(n,[{key:"set",value:function(e,t){var r=[].concat(p(this.inner().set(e,t)));return n.fromArray(r)}},{key:"setPath",value:function(e,t){if(0===e.length)return n.fromArray(t);var r=v(e),u=r[0],i=r.slice(1),o=this.inner().get(u);return o.setPath?this.set(u,o.setPath(i,t)):this.set(u,t)}},{key:"toJSON",value:function(){return[].concat(p(this.inner()))}},{key:"equals",value:function(e){return Ne(this,e)}}],[{key:"fromArray",value:function(e){return new n(e)}},{key:"of",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.fromArray(t)}},{key:"metadata",value:function(e){return we(n,e)}},{key:"innerTypes",value:function(){return _}}]),n}(L);Se.displayName="List",Se.EMPTY=Se.of();var Me=Object.freeze(Se),Pe=function(t){function n(t){f(this,n);var r=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n));if(j(t))throw TypeError("missing set");var u=e.OrderedSet(t);return r.inner=g(u),r.size=u.size,r[Symbol.iterator]=function(){return u[Symbol.iterator]()},Object.freeze(r),r}return l(n,t),c(n,[{key:"set",value:function(){q("Set.set is not supported")}},{key:"setPath",value:function(e,t){return 0===e.length?new n(t):void q("Set.setPath is not supported for non-empty paths")}},{key:"toJSON",value:function(){return[].concat(p(this))}},{key:"equals",value:function(e){return Ne(this,e)}}],[{key:"fromSet",value:function(e){return new n(e)}},{key:"fromArray",value:function(e){return n.fromSet(new Set(e))}},{key:"of",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.fromArray(t)}},{key:"metadata",value:function(e){return we(n,e)}},{key:"innerTypes",value:function(){return _}}]),n}(L);Pe.displayName="ModelicoSet",Pe.EMPTY=Pe.of();var _e=Object.freeze(Pe),ze=function(e){return d(e)},Te=Object.freeze(ze),Ee=function(e,t,n,r,u){return e.includes(u)?function(){var i=r[u].apply(r,arguments);return Je(e,t,n,i)}:r[u]},Ae=function(e,t,n,r,u,i,o){return n.includes(o)?function(){for(var o=arguments.length,a=Array(o),f=0;f<o;f++)a[f]=arguments[f];var c=i.setPath([],t.apply(e,a));return Je(n,r,u,c)}:r.includes(o)?function(){for(var o=arguments.length,a=Array(o),f=0;f<o;f++)a[f]=arguments[f];t.apply(e,a);var c=i.setPath([],e);return Je(n,r,u,c)}:function(){for(var n=arguments.length,r=Array(n),u=0;u<n;u++)r[u]=arguments[u];return t.apply(e,r)}},Je=function(e,t,n,r){var u=function(r,u){if(u in r)return Ee(e,t,n,r,u);var i=n(r.inner()),o=i[u];return"function"==typeof o?Ae(i,o,e,t,n,r,u):o};return new Proxy(r,{get:u})},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te;return Object.freeze({type:e,reviver:k(e)})},xe=["set","setPath"],De=xe,Ce=[],Ye=xe,Ue=[],Le=xe.concat(["delete","insert","clear","push","pop","unshift","shift","update","merge","mergeWith","mergeDeep","mergeDeepWith","map","filter","filterNot","reverse","sort","sortBy","slice","rest","butLast","skip","skipLast","skipWhile","skipUntil","take","takeLast","takeWhile","takeUntil","concat"]),Ie=[],Fe=xe,We=["setDate","setFullYear","setHours","setMinutes","setMilliseconds","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"],Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.metadata?e.metadata.apply(e,p(n)):Object.freeze({type:e,reviver:Y(t,e)})},He=Object.freeze({_:Be,asIs:qe,any:g(qe(Te)),number:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wrap,n=void 0!==t&&t;return n?de.metadata():qe(Number)},string:g(qe(String)),boolean:g(qe(Boolean)),regExp:g(qe(RegExp)),fn:g(qe(Function)),date:ge.metadata,enumMap:he.metadata,list:Me.metadata,map:ie.metadata,stringMap:se.metadata,maybe:R.metadata,set:_e.metadata}),Re={about:Object.freeze({version:t,author:n,homepage:u,license:r}),Any:Te,Number:de,Date:ge,Enum:V,EnumMap:he,List:Me,Map:ie,StringMap:se,Maybe:R,Base:L,Set:_e,fields:function(e){return e[o]()},fromJSON:function(e,t){return JSON.parse(t,Be(e).reviver)},genericsFromJSON:function(e,t,n){return JSON.parse(n,Be(e,0,t).reviver)},metadata:He,proxyMap:O(Je,De,Ce,d),proxyEnumMap:O(Je,De,Ce,d),proxyList:O(Je,Le,Ie,d),proxySet:O(Je,Ye,Ue,d),proxyDate:O(Je,Fe,We,d)};return Re});
