!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):function(){var n=e.Modelico,r=t();e.Modelico=r,r.noConflict=function(){return e.Modelico=n,r}}()}(this,function(){"use strict";var e="19.0.0",t="Javier Cejudo <javier@javiercejudo.com> (http://www.javiercejudo.com)",n="MIT",r="https://github.com/javiercejudo/modelico#readme",u=Symbol("type"),i=Symbol("fields"),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},y=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},v=function(e){return function(t){return t[e]}},p=function(e,t){return function(){return t(e.apply(void 0,arguments))}},h=function(e){return!e},m=function(e){return e},b=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.bind.apply(e,[void 0].concat(n))},d=function(e){return function(t,n){return e(n)}},O=function(e){return function(){return e}},g=function(e){return null==e||Number.isNaN(e)},j=p(g,h),k=function(e){return function(t){return g(t)?e:t}},w=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})},S=p(v("reviver"),k(d(m))),N=function(e){return"object"===("undefined"==typeof e?"undefined":o(e))&&!!e},M=Object.freeze({}),P=function(e,t){return null==e||null==t?e===t:e.constructor===t.constructor},_=p(P,h),T=function(e,t){if(!t.innerTypes)throw Error("missing static innerTypes for "+(t.displayName||t.name));return t.innerTypes(e+1,t)},E=function(e){throw Error(e)},z=new WeakMap,A=function(e,t){return z.has(t)||z.set(t,T(e,t)),z.get(t)},J=function(e,t,n,r){return Object.keys(r).reduce(function(u,i){var o=A(e,t),a=o[i];return a?u[i]=S(a)(n,r[i]):u[i]=r[i],u},{})},q=function(e,t){return function(n,r){if(""!==n)return r;var u=N(r)?J(e,t,n,r):r;return new t(u)}},x=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M,r=arguments[2];if(a(this,e),!N(n))throw TypeError("expected an object with fields for "+(t.displayName||t.name)+" but got "+n);Object.freeze(n);var o=T(0,t);r=k(this)(r),r[u]=O(t),r[i]=O(n),Object.keys(o).forEach(function(e){var t=n[e],u=Ce.Maybe.EMPTY;if(j(t))u=t;else if(o[e].type!==Ce.Maybe)throw TypeError('no value for key "'+e+'"');r[e]=O(u)})}return f(e,[{key:"set",value:function(e,t){var n=Object.assign({},this[i](),c({},e,t));return new(this[u]())(n)}},{key:"setPath",value:function(e,t){if(0===e.length)return new(this[u]())(t);var n=this[e[0]]();return n.setPath?this.set(e[0],n.setPath(e.slice(1),t)):this.set(e[0],t)}},{key:"equals",value:function(e){return this===e||!_(this,e)&&JSON.stringify(this)===JSON.stringify(e)}},{key:"toJSON",value:function(){return this[i]()}}],[{key:"factory",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new(Function.prototype.bind.apply(e,[null].concat(n)))}}]),e}(),C=Object.freeze(x),D=function(e){return function(t,n){if(""!==t)return n;var r=null===n?null:e.reviver(t,n);return new I(r)}},Y=function(){function e(){a(this,e)}return f(e,[{key:"toJSON",value:function(){return null}}]),e}(),U=function(){function e(t){a(this,e),this.get=O(t),Object.freeze(this)}return f(e,[{key:"toJSON",value:function(){var e=this.get();return e.toJSON?e.toJSON():e}}]),e}(),F=new Y,I=function(e){function t(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];a(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t)),u=n&&g(e)?F:new U(e);return r.inner=O(u),Object.freeze(r),r}return s(t,e),f(t,[{key:"set",value:function(e,n){if(this.isEmpty())return this;var r=this.inner().get();return new t(r.set(e,n))}},{key:"setPath",value:function(e,n){if(0===e.length)return t.of(n);if(this.isEmpty())return this;var r=this.inner().get(),u=r.setPath?r.setPath(e,n):null;return t.of(u)}},{key:"isEmpty",value:function(){return this.inner()===F}},{key:"getOrElse",value:function(e){return this.isEmpty()?e:this.inner().get()}},{key:"map",value:function(e){return this.isEmpty()?this:t.ofAny(e(this.inner().get()))}},{key:"toJSON",value:function(){return this.inner().toJSON()}},{key:"equals",value:function(e){if(this===e)return!0;if(_(this,e))return!1;var t=this.inner(),n=e.inner();if(this.isEmpty()||e.isEmpty())return t===n;var r=t.get(),u=n.get();return r.equals?r.equals(u):Object.is(r,u)}}],[{key:"of",value:function(e){return new t(e)}},{key:"ofAny",value:function(e){return new t(e,!1)}},{key:"metadata",value:function(e){return Object.freeze({type:t,reviver:D(e)})}},{key:"innerTypes",value:function(){return M}}]),t}(C);I.displayName="Maybe",I.EMPTY=I.of();var L=Object.freeze(I),B=function(e,t){return Object.assign(e,c({},t,{code:t}))},H=function(e){return function(t,n){var r=e[n];if(g(r))throw TypeError("missing enumerator ("+n+")");return r}},R=function(e){function t(e){a(this,t);var n=Array.isArray(e)?e.reduce(B,{}):e,r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));return Object.getOwnPropertyNames(n).forEach(function(e){r[e]=O(n[e]),n[e].toJSON=O(e)}),Object.defineProperty(r,"metadata",{value:O(Object.freeze({type:t,reviver:H(n)})),enumerable:!1}),Object.freeze(r),r}return s(t,e),f(t,null,[{key:"fromObject",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return new t(e)}},{key:"innerTypes",value:function(){return M}}]),t}(C);R.displayName="Enum";var W=Object.freeze(R),G=function(e,t,n,r){var u=e.inner();return u.set(n,r),t.fromMap(u)},K=function(e,t){return Object.freeze({type:e,reviver:t})},Q=function(e){function t(e,n){a(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(g(n))throw TypeError("missing map");var u=new Map(n);return r.inner=function(){return new Map(u)},r[Symbol.iterator]=function(){return u[Symbol.iterator]()},r}return s(t,e),f(t,[{key:"setPath",value:function(e,t){if(0===e.length)return new(this[u]())(t);var n=this.inner().get(e[0]);return n.setPath?this.set(e[0],n.setPath(e.slice(1),t)):this.set(e[0],t)}},{key:"equals",value:function(e){if(this===e)return!0;if(_(this,e))return!1;var t=[].concat(y(e));return[].concat(y(this)).every(function(e,n){var r=t[n];return e.every(function(e,t){var n=r[t];return e.equals?e.equals(n):Object.is(e,n)})})}}]),t}(C),V=Object.freeze(Q),X=function(e,t){return function(n){var r=S(e),u=r("",n[0]),i=S(t),o=i("",n[1]);return[u,o]}},Z=function(e,t){return function(n,r){if(""!==n)return r;var u=null===r?null:new Map(r.map(X(e,t)));return $.fromMap(u)}},$=function(e){function t(e){a(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t,e));return Object.freeze(n),n}return s(t,e),f(t,[{key:"set",value:function(e,n){return G(this,t,e,n)}},{key:"toJSON",value:function(){return[].concat(y(this.inner()))}}],[{key:"fromMap",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return t.fromMap(new Map(e))}},{key:"of",value:function(){var e=arguments.length;if(e%2===1)throw TypeError("Map.of requires an even number of arguments");for(var n=[],r=0;r<e;r+=2)n.push([arguments.length<=r?void 0:arguments[r],arguments.length<=r+1?void 0:arguments[r+1]]);return t.fromArray(n)}},{key:"fromObject",value:function(e){return t.fromArray(w(e))}},{key:"metadata",value:function(e,n){return K(t,Z(e,n))}},{key:"innerTypes",value:function(){return M}}]),t}(V);$.displayName="ModelicoMap",$.EMPTY=$.of();var ee=Object.freeze($),te=function(e,t){return e[t[0].toJSON()]=t[1],e},ne=function(e,t,n){return function(r){var u=S(e),i=u("",r),o=S(t),a=o("",n[r]);return[i,a]}},re=function(e,t){return function(n,r){if(""!==n)return r;var u=null===r?null:new Map(Object.keys(r).map(ne(e,t,r)));return new ue(u)}},ue=function(e){function t(e){a(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t,e));return Object.freeze(n),n}return s(t,e),f(t,[{key:"set",value:function(e,n){return G(this,t,e,n)}},{key:"toJSON",value:function(){return[].concat(y(this.inner())).reduce(te,{})}}],[{key:"fromMap",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return t.fromMap(new Map(e))}},{key:"of",value:function(){var e=arguments.length;if(e%2===1)throw TypeError("EnumMap.of requires an even number of arguments");for(var n=[],r=0;r<e;r+=2)n.push([arguments.length<=r?void 0:arguments[r],arguments.length<=r+1?void 0:arguments[r+1]]);return t.fromArray(n)}},{key:"metadata",value:function(e,n){return K(t,re(e,n))}},{key:"innerTypes",value:function(){return M}}]),t}(V);ue.displayName="EnumMap",ue.EMPTY=ue.of();var ie=Object.freeze(ue),oe=function(e,t){return ae.of(t)},ae=function(e){function t(e){a(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));if(!Number.isNaN(e)&&g(e))throw TypeError("missing number");return n.inner=O(Number(e)),Object.freeze(n),n}return s(t,e),f(t,[{key:"set",value:function(){E("Number.set is not supported")}},{key:"setPath",value:function(e,n){return 0===e.length?t.of(n):void E("ModelicoNumber.setPath is not supported for non-empty paths")}},{key:"toJSON",value:function(){var e=this.inner();return Object.is(e,-0)?"-0":Object.is(e,1/0)?"Infinity":Object.is(e,-(1/0))?"-Infinity":Object.is(e,NaN)?"NaN":e}},{key:"equals",value:function(e){return this===e||!_(this,e)&&Object.is(this.inner(),e.inner())}}],[{key:"of",value:function(e){return new t(e)}},{key:"metadata",value:function(){return Object.freeze({type:t,reviver:oe})}},{key:"innerTypes",value:function(){return M}}]),t}(C);ae.displayName="ModelicoNumber";var fe=Object.freeze(ae),ce=function(e,t){var n=null===t?null:new Date(t);return new se(n)},se=function(e){function t(e){a(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));if(g(e))throw TypeError("missing date");var r=new Date(e.getTime());return n.inner=function(){return new Date(r.getTime())},Object.freeze(n),n}return s(t,e),f(t,[{key:"set",value:function(){E("Date.set is not supported")}},{key:"setPath",value:function(e,n){return 0===e.length?t.of(n):void E("Date.setPath is not supported for non-empty paths")}},{key:"toJSON",value:function(){return this.inner().toISOString()}},{key:"equals",value:function(e){return this===e||!_(this,e)&&this.toJSON()===e.toJSON()}}],[{key:"of",value:function(e){return new t(e)}},{key:"metadata",value:function(){return Object.freeze({type:t,reviver:ce})}},{key:"innerTypes",value:function(){return M}}]),t}(C);se.displayName="ModelicoDate";var le=Object.freeze(se),ye=function(e,t){return function(n,r){if(""!==n)return r;var u=b(S(t),n),i=null===r?null:r.map(u);return new e(i)}},ve=function(e,t){return Object.freeze({type:e,reviver:ye(e,t)})},pe=function(e,t){if(e===t)return!0;if(_(e,t))return!1;var n=[].concat(y(t));return[].concat(y(e)).every(function(e,t){var r=n[t];return e.equals?e.equals(r):Object.is(e,r)})},he=function(e){function t(e){a(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));if(g(e))throw TypeError("missing list");var r=[].concat(y(e));return n.inner=function(){return[].concat(y(r))},n[Symbol.iterator]=function(){return r[Symbol.iterator]()},Object.freeze(n),n}return s(t,e),f(t,[{key:"set",value:function(e,n){var r=this.inner();return r[e]=n,t.fromArray(r)}},{key:"setPath",value:function(e,n){if(0===e.length)return t.fromArray(n);var r=this.inner()[e[0]];return r.setPath?this.set(e[0],r.setPath(e.slice(1),n)):this.set(e[0],n)}},{key:"toJSON",value:function(){return this.inner()}},{key:"equals",value:function(e){return pe(this,e)}}],[{key:"fromArray",value:function(e){return new t(e)}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.fromArray(n)}},{key:"metadata",value:function(e){return ve(t,e)}},{key:"innerTypes",value:function(){return M}}]),t}(C);he.displayName="List",he.EMPTY=he.of();var me=Object.freeze(he),be=function(e){function t(e){a(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));if(g(e))throw TypeError("missing set");var r=new Set(e);return n.inner=function(){return new Set(r)},n[Symbol.iterator]=function(){return r[Symbol.iterator]()},Object.freeze(n),n}return s(t,e),f(t,[{key:"set",value:function(){E("Set.set is not supported")}},{key:"setPath",value:function(e,n){return 0===e.length?new t(n):void E("Set.setPath is not supported for non-empty paths")}},{key:"toJSON",value:function(){return[].concat(y(this.inner()))}},{key:"equals",value:function(e){return pe(this,e)}}],[{key:"fromSet",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return t.fromSet(new Set(e))}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.fromArray(n)}},{key:"metadata",value:function(e){return ve(t,e)}},{key:"innerTypes",value:function(){return M}}]),t}(C);be.displayName="ModelicoSet",be.EMPTY=be.of();var de=Object.freeze(be),Oe=function(e){return m(e)},ge=Object.freeze(Oe),je=function(e,t,n,r){return e.includes(r)?function(){var u=n[r].apply(n,arguments);return we(e,t,u)}:n[r]},ke=function(e,t,n,r,u,i){return n.includes(i)?function(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];var f=u.setPath([],t.apply(e,o));return we(n,r,f)}:r.includes(i)?function(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];t.apply(e,o);var f=u.setPath([],e);return we(n,r,f)}:function(){for(var n=arguments.length,r=Array(n),u=0;u<n;u++)r[u]=arguments[u];return t.apply(e,r)}},we=function(e,t,n){var r=function(n,r){if(r in n)return je(e,t,n,r);var u=n.inner(),i=u[r];return"function"==typeof i?ke(u,i,e,t,n,r):i};return new Proxy(n,{get:r})},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge;return Object.freeze({type:e,reviver:d(e)})},Ne=["set","setPath"],Me=Ne,Pe=["set","delete","clear"],_e=Ne,Te=["add","delete","clear"],Ee=Ne.concat(["concat","slice","filter"]),ze=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"],Ae=Ne,Je=["setDate","setFullYear","setHours","setMinutes","setMilliseconds","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"],qe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.metadata?e.metadata.apply(e,y(n)):Object.freeze({type:e,reviver:q(t,e)})},xe=Object.freeze({_:qe,asIs:Se,any:O(Se(ge)),number:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wrap,n=void 0!==t&&t;return n?fe.metadata():Se(Number)},string:O(Se(String)),boolean:O(Se(Boolean)),regExp:O(Se(RegExp)),fn:O(Se(Function)),date:le.metadata,enumMap:ie.metadata,list:me.metadata,map:ee.metadata,maybe:L.metadata,set:de.metadata}),Ce={about:Object.freeze({version:e,author:t,homepage:r,license:n}),Any:ge,Number:fe,Date:le,Enum:W,EnumMap:ie,List:me,Map:ee,Maybe:L,Base:C,Set:de,fields:function(e){return e[i]()},fromJSON:function(e,t){return JSON.parse(t,qe(e).reviver)},genericsFromJSON:function(e,t,n){return JSON.parse(n,qe(e,0,t).reviver)},metadata:xe,proxyMap:b(we,Me,Pe),proxyEnumMap:b(we,Me,Pe),proxyList:b(we,Ee,ze),proxySet:b(we,_e,Te),proxyDate:b(we,Ae,Je)};return Ce});
