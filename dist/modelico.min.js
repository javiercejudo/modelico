!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):function(){var n=e.Modelico,r=t();e.Modelico=r,r.noConflict=function(){return e.Modelico=n,r}}()}(this,function(){"use strict";var e=Symbol("type"),t=Symbol("fields"),n=Symbol("innerOrig"),r=Object.freeze({typeSymbol:e,fieldsSymbol:t,innerOrigSymbol:n}),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},f=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},s=function(e){return Array.isArray(e)?e:Array.from(e)},l=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},v=function(e,t){return function(){return t(e.apply(void 0,arguments))}},y=function(e){return!e},p=function(e){return e},h=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return[].concat(t,[p]).reduce(v)},d=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.bind.apply(e,[void 0].concat(n))},m=function(e){return function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e(n,r)}},g=function(e){return function(){return e}},b=function(e){return null==e||Number.isNaN(e)},O=v(b,y),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(b(e))throw TypeError('expected a value at "'+t.join(" → ")+'" but got nothing (null, undefined or NaN)');return e},k=function(e){return function(t){return b(t)?e:t}},S=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})},w=v(function(e){return function(t){return t[e]}}("reviver"),k(m(j))),M=function(e){return"object"===(void 0===e?"undefined":i(e))&&!!e},N=function(e){return"function"==typeof e},_=Object.freeze({}),z=Object.freeze([]),A=function(e,t){return e===t||Object.is(e,t)},T=v(function(e,t){return null==e||null==t?e===t:e.constructor===t.constructor},y),J=function(e,t){return O(e)&&e.equals?e.equals(t):A(e,t)},E=function(e){throw Error(e)},P=function(e){return function(t){return M(t)?t:e(t)}},I=function(e,t,n){return['Invalid JSON at "'+(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[]).join(" → ")+'". According to the schema\n',JSON.stringify(t,null,2)+"\n",'the value (data path "'+e.errors.filter(function(e){return""!==e.dataPath}).map(function(e){return e.dataPath})+'")\n',JSON.stringify(n,null,2)+" "+Object.prototype.toString.call(n)+"\n"].concat(e.errors.map(function(e){return e.message})).join("\n")},x=function(){return new WeakMap},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new WeakMap,t=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;return function(r){for(var i=arguments.length,u=Array(i>1?i-1:0),o=1;o<i;o++)u[o-1]=arguments[o];if(u.length>0)return t.apply(void 0,[r].concat(u));e.has(t)||e.set(t,n());var a=e.get(t)||n(),f=void 0===r?_:r;return a.has(f)||a.set(f,t.apply(void 0,[r].concat(u))),a.get(f)}};return t.cache=function(){return e},t.clear=function(){return e=new WeakMap,t},t},C=D(),R=new WeakMap,q=function(e,t){return t.innerTypes(e,t)},F=function(e,t){return R.has(t)||R.set(t,q(e,t)),R.get(t)||_},W=new WeakMap,U=void 0,Y=function(){return{nextRef:1,definitions:{},usedDefinitions:new Set,metadataRefCache:new WeakMap}},B=function(e,t){if(void 0===e.default)return t;var n={default:JSON.parse(JSON.stringify(e.default))};return t===_?Object.assign({},{type:_},n):Object.assign({},{anyOf:[{type:"null"},t]},e.type===Ft.Maybe?void 0:n)},L=function(e){if(e.schema)return B(e,e.schema());if(!(e.type&&e.type.innerTypes))return B(e,_);var t=F([],e.type);if(0===Object.keys(t).length)return _;var n={type:"object"},r=[],i=Object.keys(t).reduce(function(e,n){var i=t[n],u=G(i,!1);return void 0===i.default&&r.push(n),Object.assign(e,a({},n,u))},{}),u=Object.assign({},n,{properties:i});return r.length>0&&(u.required=r),B(e,u)},$=function(){var e=U,t=e.definitions,n=e.usedDefinitions;return Object.keys(t).map(Number).reduce(function(e,r){return n.has(r)&&(e[r]=t[r]),e},{})},G=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(W.has(e))return W.get(e)||_;if(t&&(U=Y()),U.metadataRefCache.has(e)){var n=U.metadataRefCache.get(e)||U.nextRef;return U.usedDefinitions.add(n),{$ref:"#/definitions/"+n}}var r=U.nextRef;U.metadataRefCache.set(e,r),U.nextRef+=1;var i=L(e);if(Object.assign(U.definitions,a({},r,i)),!t){var u=U.metadataRefCache.get(e),o=Object.keys(i);return!u||o.length<=1&&!Array.isArray(i[o[0]])?i:(U.usedDefinitions.add(u),{$ref:"#/definitions/"+u})}var f=$(),c=void 0;return c=0===Object.keys(f).length?i:f.hasOwnProperty(r)?{definitions:Object.assign(f,a({},r,i)),$ref:"#/definitions/"+r}:Object.assign({},i,{definitions:f}),W.set(e,c),c},H=function(e,t){return'Invalid value at "'+t.join(" → ")+'"'},V=new WeakMap,K=C(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return Object.freeze({type:e,reviver:m(h(j,e)),maybeReviver:m(e)})}),Q=g(Object.freeze({type:p,reviver:m(p),default:null})),X=function(e,t,n,r){return Object.keys(n).reduce(function(i,u){var o=r.concat(u),a=F(r,e)[u],f=N(a)?a(n,o):a;return i[u]=f?w(f)(t,n[u],o):n[u],i},{})},Z=function(e){return function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(""!==t)return n;var i=M(n)?X(e,t,n,r):n;return new e(i)}},ee=function(e){return function(t){var n=t.type.innerTypes(),r=Object.keys(n),i=M(e);return(0!==r.length||!i)&&r.filter(function(e){return!n[e].hasOwnProperty("default")}).every(function(t){return!!i&&e.hasOwnProperty(t)})}},te=function(e){return function(t){var n=e.filter(ee(t),[]);if(0===n.length)throw Error("Unable to infer type");if(n.length>1)throw Error("Ambiguous object: more than one metadata matches the object. A custom classifier can be passed as a second argument.");return n[0]}},ne=function(e,t){return e.get(t)},re=function(){function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,o=arguments[2];if(u(this,n),!M(i))throw TypeError("expected an object with fields for "+(r.displayName||r.name)+" but got "+i);Object.freeze(i);var a={},f=F([],r);(o=k(this)(o))[e]=g(r),Object.keys(f).forEach(function(e){var t=i[e],n=f[e].default,u=void 0;if(O(t))u=t;else{if(void 0===n)throw TypeError('no value for key "'+e+'" of '+(r.displayName||r.name));u=n,a[e]=u}o[e]=g(u)}),o[t]=g(Object.freeze(Object.assign(a,i)))}return o(n,[{key:"get",value:function(e){return this[t]()[e]}},{key:"getIn",value:function(e){return e.reduce(ne,this)}},{key:"copy",value:function(n){var r=Object.assign({},this[t](),n);return new(this[e]())(r)}},{key:"set",value:function(e,t){return this.copy(a({},e,t))}},{key:"setIn",value:function(e,t){if(0===e.length)return this.copy(t);var n=s(e),r=n[0],i=n.slice(1),u=this[r]();return u.setIn?this.set(r,u.setIn(i,t)):this.set(r,t)}},{key:"equals",value:function(e){if(this===e)return!0;if(T(this,e))return!1;var n=this[t](),r=e[t](),i=Object.keys(n),u=Object.keys(r);return i.length===u.length&&i.every(function(e){return J(n[e],r[e])})}},{key:"toJSON",value:function(){return this[t]()}},{key:"toJS",value:function(){return JSON.parse(JSON.stringify(this))}},{key:"stringify",value:function(e){return JSON.stringify(this,null,e)}},{key:Symbol.toStringTag,get:function(){return"ModelicoModel"}}],[{key:"innerTypes",value:function(){return _}},{key:"factory",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(n,[null].concat(t)))}}]),n}(),ie=Object.freeze(re),ue=function(e,t){var n=t.length;if(n%2==1)throw TypeError(e.displayName+".of requires an even number of arguments");for(var r=new Map,i=0;i<n;i+=2)r.set(t[i],t[i+1]);return e.fromMap(r)},oe=C(function(e){return C(function(t){return C(function(n){return C(function(r){return Object.freeze({type:e,subtypes:Object.freeze([n,r]),reviver:t(n,r)})})})})}),ae=function(e,t){return e.every(function(e,n){return J(e,t[n])})},fe=function(e){return new Map(e)},ce=function(t){function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,i=arguments[2];u(this,r);var o=c(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));if(b(t))throw TypeError("missing map");if(i&&0===t.size){var a;return a=i,c(o,a)}var f=fe(t);return o[n]=g(f),o.inner=function(){return fe(f)},o.size=f.size,o}return f(r,ie),o(r,[{key:Symbol.iterator,value:function(){return this[n]()[Symbol.iterator]()}},{key:"has",value:function(e){return this[n]().has(e)}},{key:"get",value:function(e){return this[n]().get(e)}},{key:"set",value:function(t,n){var r=this.inner();return r.set(t,n),this[e]().fromMap(r)}},{key:"setIn",value:function(t,r){if(0===t.length)return new(this[e]())(r);var i=s(t),u=i[0],o=i.slice(1),a=this[n]().get(u);return a.setIn?this.set(u,a.setIn(o,r)):this.set(u,r)}},{key:"equals",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this===e)return!0;if(T(this,e)||this.size!==e.size)return!1;for(var n=this[Symbol.iterator](),r=e[Symbol.iterator](),i=0;i<this.size;i+=1){var u=n.next().value;if(!(t?e.has(u[0])&&J(u[1],e.get(u[0])):ae(u,r.next().value)))return!1}return!0}}]),r}(),se=Object.freeze(ce),le=Symbol("asArray"),ve=function(e,t,n){return function(r,i){return[e("",r[0],n.concat(i,0)),t("",r[1],n.concat(i,1))]}},ye=function(e,t){return e[JSON.stringify(t[0])]=t[1],e},pe=function(e,t){return function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(""!==n)return r;var u=N(e),o=N(t),a=w(u?e(r,i):e),f=w(o?t(r,i):t);if(null===r)return new me(null);var c=Array.isArray(r),s=ve(a,f,i);return me.fromMapWithOptions({asArray:c},new Map(c?r.map(s):S(r).map(function(e,t){return[JSON.parse(e[0]),e[1]]}).map(s)))}},he=void 0,de=void 0,me=function(e){function t(e){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).asArray,r=void 0===n||n;u(this,t);var i=r?he:de,o=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t,e,i));return 0===o.size?i||(o[le]=g(r),r?he=o:de=o):o[le]=g(r),Object.freeze(o),o}return f(t,se),o(t,[{key:"set",value:function(e,n){var r=this[le](),i=this.inner();return i.set(e,n),t.fromMapWithOptions({asArray:r},i)}},{key:"toJSON",value:function(){var e=[].concat(l(this));return this[le]()?e:e.reduce(ye,{})}},{key:Symbol.toStringTag,get:function(){return"ModelicoMap"}}],[{key:"fromMap",value:function(e){return new t(e)}},{key:"fromMapWithOptions",value:function(e,n){return new t(n,e)}},{key:"fromArray",value:function(e){return t.fromMap(new Map(e))}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return ue(t,n)}},{key:"fromObject",value:function(e){return t.fromArray(S(e))}},{key:"metadata",value:function(e,n){return oe(t)(pe)(e)(n)}},{key:"EMPTY",value:function(){return he||t.of()}}]),t}();me.displayName="ModelicoMap";var ge=Object.freeze(me),be=function(e,t){return e[t[0]]=t[1],e},Oe=function(e,t,n){return function(r,i){return[].concat(l(r),[[i,e("",t[i],n.concat(i))]])}},je=function(e){return function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(""!==t)return n;var i=w(N(e)?e(n,r):e),u=null===n?null:new Map(Object.keys(n).reduce(Oe(i,n,r),[]));return Se.fromMap(u)}},ke=void 0,Se=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t,e,ke));return ke||0!==n.size||(ke=n),Object.freeze(n),n}return f(t,se),o(t,[{key:"toJSON",value:function(){return[].concat(l(this)).reduce(be,{})}},{key:Symbol.toStringTag,get:function(){return"ModelicoStringMap"}}],[{key:"fromMap",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return t.fromMap(new Map(e))}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return ue(t,n)}},{key:"fromObject",value:function(e){return t.fromArray(S(e))}},{key:"metadata",value:function(e){return oe(t)(je)(e)()}},{key:"EMPTY",value:function(){return ke||t.of()}}]),t}();Se.displayName="StringMap";var we=Object.freeze(Se),Me=function(e,t){return e[t[0].toJSON()]=t[1],e},Ne=function(e,t,n,r){return function(i){return[e("",i,r),t("",n[i],r.concat(i))]}},_e=function(e,t){return function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(""!==n)return r;var u=w(N(e)?e(r,i):e),o=w(N(t)?t(r,i):t);return new Ae(null===r?null:new Map(Object.keys(r).map(Ne(u,o,r,i))))}},ze=void 0,Ae=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t,e,ze));return ze||0!==n.size||(ze=n),Object.freeze(n),n}return f(t,se),o(t,[{key:"toJSON",value:function(){return[].concat(l(this)).reduce(Me,{})}},{key:Symbol.toStringTag,get:function(){return"ModelicoEnumMap"}}],[{key:"fromMap",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return t.fromMap(new Map(e))}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return ue(t,n)}},{key:"metadata",value:function(e,n){return oe(t)(_e)(e)(n)}},{key:"EMPTY",value:function(){return ze||t.of()}}]),t}();Ae.displayName="EnumMap";var Te=Object.freeze(Ae),Je=function(e,t){return Pe.of(t)},Ee=C(function(){return Object.freeze({type:Pe,reviver:Je})}),Pe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));if(!Number.isNaN(e)&&b(e))throw TypeError("missing number");return n.inner=g(Number(e)),Object.freeze(n),n}return f(t,ie),o(t,[{key:"set",value:function(){E("Number.set is not supported")}},{key:"setIn",value:function(e,n){if(0===e.length)return t.of(n);E("ModelicoNumber.setIn is not supported for non-empty paths")}},{key:"toJSON",value:function(){var e=this.inner();return Object.is(e,-0)?"-0":e===1/0?"Infinity":e===-1/0?"-Infinity":Number.isNaN(e)?"NaN":e}},{key:"equals",value:function(e){return this===e||!T(this,e)&&A(this.inner(),e.inner())}},{key:Symbol.toStringTag,get:function(){return"ModelicoNumber"}}],[{key:"of",value:function(e){return new t(e)}},{key:"metadata",value:function(){return Ee()}}]),t}();Pe.displayName="ModelicoNumber";var Ie=Object.freeze(Pe),xe=function(e,t){var n=null===t?null:new Date(t);return new Ce(n)},De=C(function(){return Object.freeze({type:Ce,reviver:xe})}),Ce=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));if(b(e))throw TypeError("missing date");var r=new Date(e.getTime());return n.inner=function(){return new Date(r.getTime())},Object.freeze(n),n}return f(t,ie),o(t,[{key:"set",value:function(){E("Date.set is not supported")}},{key:"setIn",value:function(e,n){if(0===e.length)return t.of(n);E("Date.setIn is not supported for non-empty paths")}},{key:"toJSON",value:function(){return this.inner().toISOString()}},{key:"equals",value:function(e){return this===e||!T(this,e)&&this.toJSON()===e.toJSON()}},{key:Symbol.toStringTag,get:function(){return"ModelicoDate"}}],[{key:"of",value:function(e){return new t(e)}},{key:"metadata",value:function(){return De()}}]),t}();Ce.displayName="ModelicoDate";var Re=Object.freeze(Ce),qe=function(e,t,n){return function(r){return N(e[r])?e[r](t,n):e[r]}},Fe=function(e,t){return function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(""!==n)return r;var u=Array.isArray(t);if(u&&r.length!==t.length)throw TypeError("tuple has missing or extra items");var o=u?qe(t,r,i):N(t)?function(e){return t(r,i)}:function(e){return t},a=null===r?null:r.map(function(e,t){return w(o(t))("",e,i.concat(t))});return new e(a)}},We=C(function(e){return C(function(t){return Object.freeze({type:e,subtypes:Object.freeze([t]),reviver:Fe(e,t)})})}),Ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e===t)return!0;if(T(e,t)||e.size!==t.size)return!1;for(var r=e[Symbol.iterator](),i=t[Symbol.iterator](),u=0;u<e.size;u+=1){var o=r.next().value;if(n){if(!t.has(o))return!1}else if(!J(o,i.next().value))return!1}return!0},Ye=void 0,Be=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];u(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));if(b(e))throw TypeError("missing list");if(Ye&&0===e.length){var i;return i=Ye,c(r,i)}return Object.freeze(e),r.inner=g(e),r[n]=r.inner,r.size=e.length,Ye||0!==r.size||(Ye=r),Object.freeze(r),r}return f(t,ie),o(t,[{key:Symbol.iterator,value:function(){return this.inner()[Symbol.iterator]()}},{key:"includes",value:function(){var e;return(e=this.inner()).includes.apply(e,arguments)}},{key:"get",value:function(e){return this.inner()[e]}},{key:"set",value:function(e,n){var r=[].concat(l(this));return r[e]=n,t.fromArray(r)}},{key:"setIn",value:function(e,n){if(0===e.length)return t.fromArray(n);var r=s(e),i=r[0],u=r.slice(1),o=this.inner()[i];return o.setIn?this.set(i,o.setIn(u,n)):this.set(i,n)}},{key:"toJSON",value:function(){return this.inner()}},{key:"toArray",value:function(){return this.toJSON()}},{key:"equals",value:function(e){return Ue(this,e)}},{key:Symbol.toStringTag,get:function(){return"ModelicoList"}}],[{key:"fromArray",value:function(e){return new t(e)}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.fromArray(n)}},{key:"metadata",value:function(e){return We(t)(e)}},{key:"EMPTY",value:function(){return Ye||t.of()}}]),t}();Be.displayName="List";var Le=Object.freeze(Be),$e=void 0,Ge=function(e){return new Set(e)},He=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;u(this,t);var r=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));if(b(e))throw TypeError("missing set");if($e&&0===e.size){var i;return i=$e,c(r,i)}var o=Ge(e);return r[n]=g(o),r.inner=function(){return Ge(o)},r.size=o.size,$e||0!==r.size||($e=r),Object.freeze(r),r}return f(t,ie),o(t,[{key:Symbol.iterator,value:function(){return this.inner()[Symbol.iterator]()}},{key:"has",value:function(e){return this[n]().has(e)}},{key:"set",value:function(){E("Set.set is not supported")}},{key:"setIn",value:function(e,n){if(0===e.length)return new t(n);E("Set.setIn is not supported for non-empty paths")}},{key:"toJSON",value:function(){return[].concat(l(this))}},{key:"equals",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ue.apply(void 0,[this].concat(t))}},{key:Symbol.toStringTag,get:function(){return"ModelicoSet"}}],[{key:"fromSet",value:function(e){return new t(e)}},{key:"fromArray",value:function(e){return t.fromSet(new Set(e))}},{key:"of",value:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.fromArray(n)}},{key:"metadata",value:function(e){return We(t)(e)}},{key:"EMPTY",value:function(){return $e||t.of()}}]),t}();He.displayName="ModelicoSet";var Ve=Object.freeze(He),Ke=function(e){return function(t,n,r){if(""!==t)return n;if(null===n)return new et;var i=N(e)?e(n,r):e,u=k(i.reviver)(i.maybeReviver)(t,n,r);return Xe.of(u)}},Qe=C(function(e){return Object.freeze({type:Xe,subtypes:[e],reviver:Ke(e),default:new et})}),Xe=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,ie),o(t,[{key:"get",value:function(e){var t=e[0],n=e[1],r=this.getOrElse(t);return r.get?r.get(n):r}},{key:"set",value:function(e,n){if(this.isEmpty())return this;var r=this.inner();if(b(r))return this;var i=r.set?r.set(e,n):null;return t.of(i)}},{key:"setIn",value:function(e,n){if(0===e.length)return t.of(n);var r=s(e),i=r[0],u=r.slice(1),o=i[0],a=i[1],f=this.isEmpty()?o:this.inner(),c=f.setIn?f.setIn([a].concat(l(u)),n):null;return t.of(c)}}],[{key:"of",value:function(e){return b(e)||e instanceof et?new et:new tt(e)}},{key:"metadata",value:function(e){return Qe(e)}}]),t}();Xe.displayName="Maybe";var Ze=void 0,et=function(e){function t(){var e;u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));return Ze||(n.inner=function(){throw TypeError("nothing holds no value")},Ze=n),e=Ze,c(n,e)}return f(t,Xe),o(t,[{key:"toJSON",value:function(){return null}},{key:"isEmpty",value:function(){return!0}},{key:"getOrElse",value:function(e){return e}},{key:"map",value:function(e){return this}},{key:"flatMap",value:function(e){return this}},{key:"equals",value:function(e){return this===e}},{key:Symbol.toStringTag,get:function(){return"ModelicoNothing"}}]),t}();et.displayName="Nothing";var tt=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t));return n.inner=g(e),Object.freeze(n),n}return f(t,Xe),o(t,[{key:"toJSON",value:function(){var e=this.inner();return b(e)?null:e.toJSON?e.toJSON():e}},{key:"isEmpty",value:function(){return!1}},{key:"getOrElse",value:function(){return this.inner()}},{key:"map",value:function(e){return t.of(e(this.inner()))}},{key:"flatMap",value:function(e){var t=e(this.inner());if(!(t instanceof Xe))throw TypeError("Maybe.flatMap expects a Maybe-returning function");return t}},{key:"equals",value:function(e){return this===e||!T(this,e)&&J(this.inner(),e.inner())}},{key:Symbol.toStringTag,get:function(){return"ModelicoJust"}}],[{key:"of",value:function(e){return new t(e)}}]),t}();tt.displayName="Just",Xe.Nothing=new et,Xe.Just=tt;var nt=Object.freeze(Xe),rt=C(function(e){return Object.freeze({type:e,reviver:Z(e)})}),it=function(e,t){return e.metadata?e.metadata.apply(e,l(t)):rt(e)},ut=C(function(e){return C(function(t){return it(e,t)})}),ot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z;return ut(e)(t)},at=function(e,t){return Object.freeze(Object.assign({},e,{default:t,reviver:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return""!==n?r:b(r)?k(e)(e.baseMetadata).reviver(n,t,i):e.reviver(n,r,i,{default:t})}}))},ft=C(function(e){return C(function(t){return at(e,t)},function(){return new Map})}),ct=g(Object.freeze({_:ot,base:rt,asIs:K,any:Q,anyOf:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"type";return function(r,i){if(0===t.length)return Q;for(var u=t[0][1][e]().metadata().reviver("",r[n]),o=0;o<t.length;o+=1){var a=t[o],f=a[0];if(u===a[1])return f}var c=i.slice(0,-1);throw TypeError('unsupported enumerator "'+u.toJSON()+'" at "'+c.join(" → ")+'"')}},union:function(e,t,n){var r=t.map(P(ot));n=void 0===n?te(r):n;return Object.assign({},rt(e),{reviver:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return""!==e?t:n(t,r).reviver(e,t,i)},subtypes:r})},number:g(K(Number)),string:g(K(String)),boolean:g(K(Boolean)),wrappedNumber:Ie.metadata,date:Re.metadata,enumMap:Te.metadata,list:Le.metadata,map:ge.metadata,stringMap:we.metadata,maybe:nt.metadata,set:Ve.metadata,withDefault:function(e,t){return ft(e)(t)}})),st=function(e){return Ft.getSchema(e,!1)},lt=[!0,g("")],vt=function(e){var t=Ft.getSchema,n=Ft.metadata(),r={},i=n._,u=n.base,o=n.asIs,f=n.any,c=n.anyOf,s=n.union,l=n.string,v=n.number,y=n.wrappedNumber,h=n.boolean,d=n.date,m=n.enumMap,b=n.list,O=n.map,j=n.stringMap,k=n.set,S=n.maybe,w=n.withDefault,M=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"reviver";return function(u,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(""!==u)return o;var f=n===_?lt:e(n,r(o),a);if(!f[0])throw TypeError(f[1]());return(N(t)?t(o,a):t)[i]("",o,a)}},z=function(e,t,n,r){return function(i,u){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(""!==i)return u;var a=M(e,t,p,r)(i,u);return M(f(),n,function(e){return e.inner()},r)(i,a,o)}},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g(_),i=t===_&&n===_?_:Object.assign({},t,n),u=M(e,i),o=N(e)?{type:e}:e,a=Object.assign({},o,{baseMetadata:o,reviver:u,ownSchema:g(i),schema:function(){return Object.assign({},i,r())}});return e.maybeReviver&&(a.maybeReviver=M(e,i,p,"maybeReviver")),a};r.meta=A;var T=function(e,n,r,u){var o=i(e,n);return r===_?o:A(o,_,r,function(){return t(o,u)})},J=C(function(e){return C(function(t){return C(function(n){return C(function(r){return T(e,t,n,r)},function(){return new Map})})})});r._=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return J(e)(t)(n)(r)};var E=function(e,n,r){var i=u(e);return n===_?i:A(i,{type:"object"},n,function(){return t(i,r)})},I=C(function(e){return C(function(t){return C(function(n){return E(e,t,n)},function(){return new Map})})});r.base=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return I(e)(t)(n)};var x=function(e,t){return A(o(e),t)},D=C(function(e){return C(function(t){return x(e,t)})});r.asIs=function(e,t){return D(e)(t)},r.any=C(function(e){return A(f(),e)}),r.wrappedNumber=C(function(e){var t=y(),n=Object.assign({type:"number"},e),r={anyOf:[{type:"number"},{enum:["-0","-Infinity","Infinity","NaN"]}]},i=z(t,r,n);return Object.assign({},t,{reviver:i,ownSchema:g(r),schema:g(r)})}),r.number=C(function(e){return A(v(),{type:"number"},e)}),r.string=C(function(e){return A(l(),{type:"string"},e)}),r.boolean=C(function(e){return A(h(),{type:"boolean"},e)}),r.date=C(function(e){return A(d(),{type:"string",format:"date-time"},e)}),r._enum=C(function(e){var t=i(e);return A(t,{enum:Object.keys(t.enumerators)})});var R=function(e,t,n){var r=Object.keys(e.enumerators),i="^("+r.join("|")+")$";return A(m(e,t),{type:"object",maxProperties:r.length,additionalProperties:!1,patternProperties:a({},i,{})},n,function(){return{patternProperties:a({},i,st(t))}})},q=C(function(e){return C(function(t){return C(function(n){return R(e,t,n)})})});r.enumMap=function(e,t,n){return q(e)(t)(n)};var F=function(e,t){return A(b(e),{type:"array"},t,function(){return{items:st(e)}})},W=C(function(e){return C(function(t){return F(e,t)})}),U=function(e,t){var n=e.length;return A(b(e),{type:"array",minItems:n,maxItems:n},t,function(){return{items:e.map(function(e){return st(e)})}})},Y=C(function(e){return C(function(t){return U(e,t)})});r.list=function(e,t){return Array.isArray(e)?Y(e)(t):W(e)(t)};var B=function(e,t,n){var r={anyOf:[{type:"array",items:{type:"array",minItems:2,maxItems:2}},{type:"object"}]};return A(O(e,t),r,n,function(){return{anyOf:r.anyOf.map(function(n,i){return 1===i?Object.assign({},n,{patternProperties:{".*":st(t)}}):Object.assign({},n,{items:Object.assign({items:[st(e),st(t)]},r.anyOf[i].items)})})}})},L=C(function(e){return C(function(t){return C(function(n){return B(e,t,n)})})});r.map=function(e,t,n){return L(e)(t)(n)};var $=function(e,t){var n={type:"object",additionalProperties:!1,patternProperties:{".*":_}},r=Object.assign(n,t),i=Object.keys(r.patternProperties)[0];return A(j(e),r,void 0,function(){return{patternProperties:a({},i,st(e))}})},G=C(function(e){return C(function(t){return $(e,t)})});r.stringMap=function(e,t){return G(e)(t)};var H=function(e,t){return A(k(e),{type:"array",uniqueItems:!0},t,function(){return{items:st(e)}})},V=C(function(e){return C(function(t){return H(e,t)})});r.set=function(e,t){return V(e)(t)};var K=function(e,t){return A(S(e),_,t,function(){return st(e)})},Q=C(function(e){return C(function(t){return K(e,t)})});r.maybe=function(e,t){return Q(e)(t)};var X=function(e,t,n){return A(w(e,t),_,n,function(){return st(e)})},Z=C(function(e){return C(function(t){return C(function(n){return X(e,t,n)})},function(){return new Map})});return r.withDefault=function(e,t,n){return Z(e)(t)(n)},r.anyOf=function(e,t){return A(c(e,t),{anyOf:e.map(function(e){return st(e[0])})})},r.union=function(e,t,n){var r=t.map(P(i)),u=s(e,r,n);return A(u,_,_,function(){return{anyOf:r.map(st)}})},Object.freeze(Object.assign({},n,r))},yt=C(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return lt};return vt(e)}),pt=C(function(e){return yt(void 0===e?void 0:function(t,n,r){return[e.validate(t,n),d(I,e,t,n,r)]})}),ht=function(e,t){return Object.assign(e,a({},t,{code:t}))},dt=function(e){return function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).default,u=e[n];if(void 0!==u)return u;if(void 0!==i){var o=e[i];if(void 0!==o)return o}throw TypeError('missing enumerator "'+n+'" without valid default at "'+r.join(" → ")+'"')}},mt=function(e){var t=dt(e);return function(n,r,i){return void 0===e[r]?null:t(n,r,i)}},gt=function(t){function n(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.displayName;u(this,n);var o=Array.isArray(t)?t.reduce(ht,{}):t;r!==n&&(r.displayName=i,Object.freeze(r));var a=c(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r));return Object.getOwnPropertyNames(o).forEach(function(t){a[t]=g(o[t]),o[t][e]=g(a),o[t].toJSON=g(t),o[t].equals=function(e){return o[t]===e}}),Object.defineProperty(a,"metadata",{value:g(Object.freeze({type:a,enumerators:o,reviver:dt(o),maybeReviver:mt(o)}))}),a}return f(n,ie),o(n,null,[{key:"fromObject",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(n,[null].concat(t)))}},{key:"fromArray",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return new(Function.prototype.bind.apply(n,[null].concat(t)))}}]),n}();Object.defineProperty(gt,"displayName",{value:"Enum",writable:!0});var bt=function(e,t,n,r,i){return e.includes(i)?function(){var u=r[i].apply(r,arguments);return jt(e,t,n,u)}:r[i]},Ot=function(e,t,n,r,i,u,o){return n.includes(o)?function(){for(var o=arguments.length,a=Array(o),f=0;f<o;f++)a[f]=arguments[f];var c=u.setIn([],t.apply(e,a));return jt(n,r,i,c)}:r.includes(o)?function(){for(var o=arguments.length,a=Array(o),f=0;f<o;f++)a[f]=arguments[f];t.apply(e,a);var c=u.setIn([],e);return jt(n,r,i,c)}:function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(e,r)}},jt=function(e,t,n,r){return new Proxy(r,{get:function(r,i){if(i in r)return bt(e,t,n,r,i);var u=n(r.inner()),o=u[i];return"function"==typeof o?Ot(u,o,e,t,n,r,i):o}})},kt=ct(),St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.base,r=void 0===n?ie:n,i=t.stringTag,a=void 0===i?"ModelicoModel":i,s=t.metadata,l=void 0===s?kt:s,v=function(t){function n(){u(this,n);var e=arguments;if(2===e.length)i=c(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e[0],e[1]));else var t=e[0],r=void 0===t?{}:t,i=c(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,n,r));return c(i)}return f(n,r),o(n,[{key:Symbol.toStringTag,get:function(){return a}}],[{key:"innerTypes",value:function(t,n){return N(e)?e(l,{path:t,Type:n}):Object.freeze(e)}}]),n}();return v.displayName=a,v},wt=ct().union,Mt=ct()._,Nt=["set","setIn"],_t=Nt,zt=["delete","clear"],At=Nt,Tt=["add","delete","clear"],Jt=Nt.concat(["map","concat","slice","filter"]),Et=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"],Pt=Nt,It=["setDate","setFullYear","setHours","setMinutes","setMilliseconds","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"],xt=d(jt,_t,zt,p),Dt=function(e,t,n){return Mt(e,t).reviver("",n)},Ct=function(e,t){return Dt(e,[],t)},Rt=function(e,t,n,r,i){return e(t,r,n).reviver("",i)},qt=function(e,t,n,r){return Rt(e,t,n,[],r)},Ft={about:Object.freeze({version:"24.1.0",author:"Javier Cejudo <javier@javiercejudo.com> (http://www.javiercejudo.com)",homepage:"https://github.com/javiercejudo/modelico#readme",license:"MIT"}),Number:Ie,Date:Re,Enum:gt,EnumMap:Te,List:Le,Map:ge,StringMap:we,Maybe:nt,Just:nt.Just,Nothing:nt.Nothing,Base:ie,Set:Ve,createModel:St,createSimpleModel:function(e,t){return St(t,{stringTag:e})},createAjvModel:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.metadata=pt(e),St(t,n)},createUnionType:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt,i=t.map(function(e){return!M(e)||e instanceof Ft.Enum?Ft.metadata()._(e):e});n=void 0===n?te(i):n;var a=i.length;return function(t){function s(){return u(this,s),c(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return f(s,t),o(s,null,[{key:"caseOf",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var u=new Map(n),o=u.size;if(a!==o)throw Error("caseOf expected "+a+" but contains "+o);if(!i.every(function(e){return u.has(e.type)}))throw Error("caseOf does not cover all cases");return function(t,n){var r=t[e],i=r?r():t.constructor,o=u.get(i),a=void 0!==o?o:n;return N(a)?a(t):a}}},{key:"metadata",value:function(){return r(s,i,n)}}]),s}(Ft.Base)},new:function(e){return function(t){return new e(t)}},fields:function(e){return e[t]()},symbols:r,fromJS:Ct,genericsFromJS:Dt,fromJSON:function(e,t){return Ct(e,JSON.parse(t))},genericsFromJSON:function(e,t,n){return Dt(e,t,JSON.parse(n))},ajvFromJS:qt,ajvGenericsFromJS:Rt,ajvFromJSON:function(e,t,n,r){return qt(e,t,n,JSON.parse(r))},ajvGenericsFromJSON:function(e,t,n,r,i){return Rt(e,t,n,r,JSON.parse(i))},metadata:ct,jsonSchemaMetadata:yt,ajvMetadata:pt,getSchema:G,validate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!(e instanceof Ft.Base))throw TypeError("Modelico.validate only works with instances of Modelico.Base");try{Ft.genericsFromJSON(e[Ft.symbols.typeSymbol](),t,JSON.stringify(e))}catch(e){return[!1,e]}return[!0,void 0]},withValidation:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;return function(n){return Object.assign({},n,{reviver:function(r,i){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(""!==r)return i;var o=n.reviver("",i,u);if(!e(o))throw TypeError(t(o,u));return o}})}},withCache:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t;V.has(e)||V.set(e,new Map);var i=V.get(e);return i.has(r)||i.set(r,t.apply(e,n)),i.get(r)},proxyMap:xt,proxyEnumMap:xt,proxyStringMap:xt,proxyList:d(jt,Jt,Et,function(e){return[].concat(l(e))}),proxySet:d(jt,At,Tt,p),proxyDate:d(jt,Pt,It,p),util:{always:g,formatAjvError:I,identity:p,isNothing:b,partial:d,pipe:h,mem:C,memFactory:D}};return Ft});
