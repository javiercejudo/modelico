var Modelico=function(){"use strict";const e=(e,t)=>t,t=(e,t)=>e.bind(void 0,t),n=(e,n,r,i)=>{if(""!==r)return i;const u=null===i?null:i.map(t(n.reviver,r));return new e(n,u)},r=(e,t,r,i)=>{return Object.freeze({type:e,reviver:n.bind(void 0,e,t)})};var i=Object.freeze({always:e=>()=>e,bind:t,"default":(e,t)=>void 0===e?t:e,objToArr:e=>Object.keys(e).map((t=>[t,e[t]])),reviverOrAsIs:t=>t.reviver||e,asIsReviver:e,iterableReviver:n,iterableMetadata:r});const u=(e,t)=>{return e[t.field]=t.value,e},s=e=>{if(!e.innerTypes)return Object.freeze({});const t=e.innerTypes();return Object.keys(t).reduce(((e,n)=>{return e[n]=t[n],Object.assign(e,s(t[n].type))}),{})},a=e=>{const t=s(e);return(n,r)=>{if(""===n)return new e(r);const u=t[n];return u?i.reviverOrAsIs(u)("",r):r}};class c{constructor(e,t,n){n=i.default(n,this);n.type=i.always(e);n.fields=i.always(Object.freeze(t));Object.getOwnPropertyNames(t).forEach((e=>n[e]=i.always(t[e])));return n}set(e,t){const n=Object.assign({},this.fields(),u({},{field:e,value:t}));return new(this.type())(n)}setPath(e,t){if(e.length===0){return new(this.type())(t)}if(e.length===1){return this.set(e[0],t)}return this.set(e[0],this[e[0]]().setPath(e.slice(1),t))}equals(e){return JSON.stringify(this)===JSON.stringify(e)}toJSON(){return this.fields()}static factory(e,t,n){return new c(e,t,n)}static fromJSON(e,t){return JSON.parse(t,a(e))}static metadata(e){return Object.freeze({type:e,reviver:a(e)})}}var o=Object.freeze(c);class f extends o{constructor(e,t,n,r){super(e,{innerMap:r});this.innerTypes=i.always(Object.freeze({keyMetadata:t,valueMetadata:n}));this.innerMap=(()=>r===null?null:new Map(r));this[Symbol.iterator]=(()=>r[Symbol.iterator]());return this}setPath(e,t){if(e.length===0){const e=this.innerTypes();return new(this.type())(e.keyMetadata,e.keyMetadata,t)}const n=this.innerMap().get(e[0]);return this.set(e[0],n.setPath(e.slice(1),t))}static set(e,t,n){const r=this.innerTypes();const i=this.innerMap();i.set(t,n);return new e(r.keyMetadata,r.valueMetadata,i)}static metadata(e,t,n,r){return Object.freeze({type:e,reviver:i.bind(t,{keyMetadata:n,valueMetadata:r})})}}var l=Object.freeze(f),h=e=>Object.freeze({type:e,reviver:i.asIsReviver}),d=Object.freeze({});const y=e=>({key:e[0],value:e[1]}),p=e=>t=>[i.reviverOrAsIs(e.keyMetadata)("",t.key),i.reviverOrAsIs(e.valueMetadata)("",t.value)],v=(e,t,n)=>{if(""!==t)return n;const r=null===n?null:new Map(n.map(p(e)));return new b(e.keyMetadata,e.valueMetadata,r)};class b extends l{constructor(e,t,n){super(b,e,t,n);return Object.freeze(this)}set(e,t){return l.set.call(this,b,e,t)}toJSON(){const e=this.fields().innerMap;return e===null?null:Array.from(e).map(y)}static fromObject(e){return b.fromMap(new Map(i.objToArr(e)))}static fromMap(e){return new b(h(String),h(d),e)}static metadata(e,t){return l.metadata(b,v,e,t)}}var M=Object.freeze(b);const O=(e,t)=>{return e[t[0].toJSON()]=t[1],e},w=(e,t)=>n=>[i.reviverOrAsIs(e.keyMetadata)("",n),i.reviverOrAsIs(e.valueMetadata)("",t[n])],j=(e,t,n)=>{if(""!==t)return n;const r=null===n?null:new Map(Object.keys(n).map(w(e,n)));return new m(e.keyMetadata,e.valueMetadata,r)};class m extends l{constructor(e,t,n){super(m,e,t,n);return Object.freeze(this)}set(e,t){return l.set.call(this,m,e,t)}toJSON(){const e=this.fields().innerMap;return e===null?null:Array.from(e).reduce(O,{})}static metadata(e,t){return l.metadata(m,j,e,t)}}var S=Object.freeze(m);class z extends o{constructor(e){super(z,{date:e});this.date=(()=>e===null?null:new Date(e.getTime()));return Object.freeze(this)}set(e){return new z(e)}setPath(e,t){if(e.length===0){return this.set(t)}return this.set(t)}toJSON(){return this.date()===null?null:this.date().toISOString()}static reviver(e,t){const n=t===null?null:new Date(t);return new z(n)}static metadata(){return Object.freeze({type:z,reviver:z.reviver})}}var g=Object.freeze(z);class A extends o{constructor(e,t){super(A,{innerList:t});this.itemMetadata=i.always(e);this.innerList=(()=>t===null?null:t.slice());this[Symbol.iterator]=(()=>t[Symbol.iterator]());return Object.freeze(this)}set(e,t){const n=this.innerList();n[e]=t;return new A(this.itemMetadata(),n)}setPath(e,t){if(e.length===0){return new A(this.itemMetadata(),t)}const n=this.innerList()[e[0]];return this.set(e[0],n.setPath(e.slice(1),t))}toJSON(){return this.fields().innerList}static fromArray(e){return new A(h(d),e)}static metadata(e){return i.iterableMetadata(A,e)}}var T=Object.freeze(A);class k extends o{constructor(e,t){super(k,{innerSet:t});this.itemMetadata=i.always(e);this.innerSet=(()=>t===null?null:new Set(t));this[Symbol.iterator]=(()=>t[Symbol.iterator]());return Object.freeze(this)}set(e,t){const n=Array.from(this.innerSet());n[e]=t;return new k(this.itemMetadata(),n)}setPath(e,t){if(e.length===0){return new k(this.itemMetadata(),t)}const n=Array.from(this.innerSet())[e[0]];return this.set(e[0],n.setPath(e.slice(1),t))}toJSON(){const e=this.fields().innerSet;return e===null?null:Array.from(e)}static fromArray(e){return k.fromSet(new Set(e))}static fromSet(e){return new k(h(d),e)}static metadata(e){return i.iterableMetadata(k,e)}}var I=Object.freeze(k);const P=(e,t)=>(e[t]={code:t})&&e,L=(e,t,n)=>{return null===n?null:e[n]};class C extends o{constructor(e){const t=Array.isArray(e)?e.reduce(P,{}):e;super(C,t);Object.getOwnPropertyNames(t).forEach((e=>this[e]().toJSON=i.always(e)));this.metadata=i.always(Object.freeze({type:C,reviver:i.bind(L,t)}));return Object.freeze(this)}}var N=Object.freeze(C);let U;const D=(e,t,n,r,i)=>{return e.includes(i)?function(){const u=r[i].apply(r,arguments);return U(e,t,n,u)}:r[i]},x=(e,t,n,r,i,u,s)=>{return n.includes(s)?function(){const s=u.setPath([],t.apply(e,arguments));return U(n,r,i,s)}:r.includes(s)?function(){t.apply(e,arguments);const s=u.setPath([],e);return U(n,r,i,s)}:function(){return t.apply(e,arguments)}};U=((e,t,n,r)=>{const i=(r,i)=>{if(i in r)return D(e,t,n,r,i);const u=r[n](),s=u[i];return"function"==typeof s?x(u,s,e,t,n,r,i):s};return new Proxy(r,{get:i})});var J=U;const E=(e,t,n,r)=>e.bind(void 0,t,n,r),R=["set","setPath"],Y=R,F=["set","delete","clear"],H=R,W=["add","delete","clear"],q=R.concat(["concat","slice","filter"]),B=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"],G=R,K=["setDate","setFullYear","setHours","setMinutes","setMilliseconds","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear"];var Q=Object.freeze({Any:d,AsIs:h,Date:g,Enum:N,EnumMap:S,List:T,Map:M,Modelico:o,Set:I,proxyMap:E(J,Y,F,"innerMap"),proxyList:E(J,q,B,"innerList"),proxySet:E(J,H,W,"innerSet"),proxyDate:E(J,G,K,"date")});return Q}();
